---
const baseUrl = import.meta.env.BASE_URL;

const navItems = [
  { name: 'Home', href: `${baseUrl}/#home` },
  { name: 'Leistungen', href: `${baseUrl}/#leistungen` },
  { name: 'Galerie', href: `${baseUrl}/#galerie` },
  { name: 'Ãœber uns', href: `${baseUrl}/#ueber-uns` },
  { name: 'Referenzen', href: `${baseUrl}/#referenzen` },
  { name: 'Kontakt', href: `${baseUrl}/#kontakt` },
];
---

<header id="main-header" class="fixed top-0 left-0 right-0 z-50 transition-all duration-500">
  <div class="absolute inset-0 glass opacity-0" id="header-bg"></div>

  <nav class="container mx-auto px-4 sm:px-6 py-4 relative z-10">
    <div class="flex items-center justify-between">
      <!-- Logo/Brand -->
      <div class="flex items-center gap-3">
        <div class="w-12 h-12 rounded-2xl bg-gradient-to-br from-[var(--color-primary)] to-[var(--color-secondary)] flex items-center justify-center shadow-lg animate-blob">
          <span class="text-2xl">ðŸŽ¨</span>
        </div>
        <a href={`${baseUrl}/#home`} class="text-xl sm:text-2xl font-bold font-display text-gray-900 hover:scale-105 transition-transform">
          <span class="gradient-text">Sabines Kinderschminken</span>
        </a>
      </div>

      <!-- Desktop Navigation -->
      <ul class="hidden lg:flex items-center gap-1">
        {navItems.map((item, index) => (
          <li style={`animation-delay: ${index * 100}ms;`} class="opacity-0 animate-fade-in-up">
            <a
              href={item.href}
              class="px-4 py-2 text-gray-700 hover:text-[var(--color-primary)] font-medium transition-all duration-200 hover:scale-110 inline-block rounded-full hover:bg-pink-50"
            >
              {item.name}
            </a>
          </li>
        ))}
        <li class="opacity-0 animate-fade-in-up delay-600">
          <a
            href={`${baseUrl}/#kontakt`}
            class="ml-2 px-6 py-2 bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-secondary)] text-white font-semibold rounded-full shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 cursor-fancy"
          >
            Buchen
          </a>
        </li>
      </ul>

      <!-- Mobile Menu Button -->
      <button
        id="mobile-menu-button"
        class="lg:hidden relative w-10 h-10 text-gray-700 hover:text-[var(--color-primary)] focus:outline-none transition-colors"
        aria-label="Toggle menu"
      >
        <div class="absolute inset-0 flex flex-col items-center justify-center gap-1.5">
          <span class="w-6 h-0.5 bg-current transition-all duration-300" id="burger-line-1"></span>
          <span class="w-6 h-0.5 bg-current transition-all duration-300" id="burger-line-2"></span>
          <span class="w-6 h-0.5 bg-current transition-all duration-300" id="burger-line-3"></span>
        </div>
      </button>
    </div>

    <!-- Mobile Navigation -->
    <div id="mobile-menu" class="lg:hidden max-h-0 overflow-hidden transition-all duration-500 ease-in-out">
      <ul class="flex flex-col gap-2 pt-6 pb-4">
        {navItems.map((item) => (
          <li class="transform translate-x-8 opacity-0 transition-all duration-300 mobile-menu-item">
            <a
              href={item.href}
              class="block px-4 py-3 text-gray-700 hover:text-white font-medium transition-all duration-200 rounded-xl hover:bg-gradient-to-r hover:from-[var(--color-primary)] hover:to-[var(--color-secondary)] hover:shadow-lg hover:translate-x-2"
            >
              {item.name}
            </a>
          </li>
        ))}
        <li class="transform translate-x-8 opacity-0 transition-all duration-300 mobile-menu-item">
          <a
            href={`${baseUrl}/#kontakt`}
            class="block px-4 py-3 text-center bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-secondary)] text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 mt-2"
          >
            Jetzt Buchen
          </a>
        </li>
      </ul>
    </div>
  </nav>
</header>

<script>
  const header = document.getElementById('main-header');
  const headerBg = document.getElementById('header-bg');
  const menuButton = document.getElementById('mobile-menu-button');
  const mobileMenu = document.getElementById('mobile-menu');
  const burgerLine1 = document.getElementById('burger-line-1');
  const burgerLine2 = document.getElementById('burger-line-2');
  const burgerLine3 = document.getElementById('burger-line-3');

  let isMenuOpen = false;

  // Scroll effect for header
  window.addEventListener('scroll', () => {
    if (window.scrollY > 50) {
      headerBg?.classList.add('opacity-100');
      headerBg?.classList.remove('opacity-0');
    } else {
      headerBg?.classList.add('opacity-0');
      headerBg?.classList.remove('opacity-100');
    }
  });

  // Mobile menu toggle
  menuButton?.addEventListener('click', () => {
    isMenuOpen = !isMenuOpen;

    if (isMenuOpen) {
      mobileMenu?.classList.remove('max-h-0');
      mobileMenu?.classList.add('max-h-[500px]');

      // Animate burger to X
      burgerLine1?.classList.add('rotate-45', 'translate-y-2');
      burgerLine2?.classList.add('opacity-0');
      burgerLine3?.classList.add('-rotate-45', '-translate-y-2');

      // Stagger menu items
      setTimeout(() => {
        const items = document.querySelectorAll('.mobile-menu-item');
        items.forEach((item, index) => {
          setTimeout(() => {
            item.classList.remove('translate-x-8', 'opacity-0');
          }, index * 50);
        });
      }, 100);
    } else {
      mobileMenu?.classList.remove('max-h-[500px]');
      mobileMenu?.classList.add('max-h-0');

      // Animate X to burger
      burgerLine1?.classList.remove('rotate-45', 'translate-y-2');
      burgerLine2?.classList.remove('opacity-0');
      burgerLine3?.classList.remove('-rotate-45', '-translate-y-2');

      // Reset items
      const items = document.querySelectorAll('.mobile-menu-item');
      items.forEach(item => {
        item.classList.add('translate-x-8', 'opacity-0');
      });
    }
  });

  // Close mobile menu when clicking a link
  const mobileLinks = mobileMenu?.querySelectorAll('a');
  mobileLinks?.forEach(link => {
    link.addEventListener('click', () => {
      isMenuOpen = false;
      mobileMenu?.classList.remove('max-h-[500px]');
      mobileMenu?.classList.add('max-h-0');
      burgerLine1?.classList.remove('rotate-45', 'translate-y-2');
      burgerLine2?.classList.remove('opacity-0');
      burgerLine3?.classList.remove('-rotate-45', '-translate-y-2');

      const items = document.querySelectorAll('.mobile-menu-item');
      items.forEach(item => {
        item.classList.add('translate-x-8', 'opacity-0');
      });
    });
  });
</script>
